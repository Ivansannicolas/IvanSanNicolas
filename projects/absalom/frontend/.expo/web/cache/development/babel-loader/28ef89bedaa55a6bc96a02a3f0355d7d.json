{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport * as Google from 'expo-google-app-auth';\nimport actionTypes from \"./ActionTypes\";\n\nfunction loadError(error) {\n  return {\n    type: actionTypes.LOAD_ERROR,\n    error: error\n  };\n}\n\nexport function loadUserSuccess(user) {\n  return {\n    type: actionTypes.LOAD_USER,\n    user: user\n  };\n}\nexport function loadUser(userId) {\n  return function _callee(dispatch) {\n    var endpoint, _await$axios$get, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            endpoint = 'http://192.168.1.134:1240/user';\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(endpoint, {\n              params: {\n                userId: userId\n              }\n            }));\n\n          case 4:\n            _await$axios$get = _context.sent;\n            data = _await$axios$get.data;\n            dispatch(loadUserSuccess(data));\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](1);\n            dispatch(loadError(_context.t0));\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 9]], Promise);\n  };\n}\nexport function setUserId(userId) {\n  return {\n    type: actionTypes.LOAD_USER_ID,\n    userId: userId\n  };\n}\nexport function updateUser(userId, updatedUser) {\n  return function _callee2(dispatch) {\n    var endpoint;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            endpoint = 'http://192.168.1.134:1240/user';\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(axios.patch(endpoint, {\n              userId: userId,\n              updatedUser: updatedUser\n            }));\n\n          case 4:\n            dispatch(loadUser(userId));\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            dispatch(loadError(_context2.t0));\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 7]], Promise);\n  };\n}\nexport function deleteUser(userId) {\n  return function _callee3(dispatch) {\n    var endpoint;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            endpoint = 'http://192.168.1.134:1240/user';\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(axios.delete(endpoint, {\n              params: userId\n            }));\n\n          case 4:\n            _context3.next = 9;\n            break;\n\n          case 6:\n            _context3.prev = 6;\n            _context3.t0 = _context3[\"catch\"](1);\n            dispatch(loadError(_context3.t0));\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[1, 6]], Promise);\n  };\n}\n\nfunction signInWithGoogle() {\n  var result;\n  return _regeneratorRuntime.async(function signInWithGoogle$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _regeneratorRuntime.awrap(Google.logInAsync({\n            androidCliendId: '37347811454-725scavgpomj1sst73qd614scdoitmot.apps.googleusercontent.com',\n            iosClientId: '37347811454-f21pooncuuhr4t83ego1ernhshq9isof.apps.googleusercontent.com',\n            scopes: ['profile', 'email']\n          }));\n\n        case 3:\n          result = _context4.sent;\n          return _context4.abrupt(\"return\", result);\n\n        case 7:\n          _context4.prev = 7;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n}\n\nexport function loginGoogle() {\n  return function _callee4(dispatch) {\n    var endpoint, _await$signInWithGoog, user, _await$axios$post, data;\n\n    return _regeneratorRuntime.async(function _callee4$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            endpoint = 'http://192.168.1.134:1240/user';\n            _context5.next = 4;\n            return _regeneratorRuntime.awrap(signInWithGoogle());\n\n          case 4:\n            _await$signInWithGoog = _context5.sent;\n            user = _await$signInWithGoog.user;\n            _context5.next = 8;\n            return _regeneratorRuntime.awrap(axios.post(endpoint, user));\n\n          case 8:\n            _await$axios$post = _context5.sent;\n            data = _await$axios$post.data;\n            dispatch(loadUserSuccess(data));\n            _context5.next = 16;\n            break;\n\n          case 13:\n            _context5.prev = 13;\n            _context5.t0 = _context5[\"catch\"](0);\n            dispatch(loadError(_context5.t0));\n\n          case 16:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[0, 13]], Promise);\n  };\n}","map":{"version":3,"sources":["/Users/ivansan/Documents/Programming-repos/absalom/frontend/src/redux/actions/userActions.js"],"names":["axios","Google","actionTypes","loadError","error","type","LOAD_ERROR","loadUserSuccess","user","LOAD_USER","loadUser","userId","dispatch","endpoint","get","params","data","setUserId","LOAD_USER_ID","updateUser","updatedUser","patch","deleteUser","delete","signInWithGoogle","logInAsync","androidCliendId","iosClientId","scopes","result","console","log","loginGoogle","post"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport * as Google from 'expo-google-app-auth';\nimport actionTypes from './ActionTypes';\n\n// homeIp: 'http://192.168.1.134:1240'\n// skylabIp: 'http://192.168.0.61:1240'\n\nfunction loadError(error) {\n  return {\n    type: actionTypes.LOAD_ERROR,\n    error,\n  };\n}\n\nexport function loadUserSuccess(user) {\n  return {\n    type: actionTypes.LOAD_USER,\n    user,\n  };\n}\n\nexport function loadUser(userId) {\n  return async (dispatch) => {\n    const endpoint = 'http://192.168.1.134:1240/user';\n    try {\n      const { data } = await axios.get(endpoint, { params: { userId } });\n      dispatch(loadUserSuccess(data));\n    } catch (error) {\n      dispatch(loadError(error));\n    }\n  };\n}\n\nexport function setUserId(userId) {\n  return {\n    type: actionTypes.LOAD_USER_ID,\n    userId,\n  };\n}\n\nexport function updateUser(userId, updatedUser) {\n  return async (dispatch) => {\n    const endpoint = 'http://192.168.1.134:1240/user';\n    try {\n      await axios.patch(endpoint, { userId, updatedUser });\n      dispatch(loadUser(userId));\n    } catch (error) {\n      dispatch(loadError(error));\n    }\n  };\n}\n\nexport function deleteUser(userId) {\n  return async (dispatch) => {\n    const endpoint = 'http://192.168.1.134:1240/user';\n    try {\n      await axios.delete(endpoint, { params: userId });\n    } catch (error) {\n      dispatch(loadError(error));\n    }\n  };\n}\n\nasync function signInWithGoogle() {\n  try {\n    const result = await Google.logInAsync({\n      androidCliendId: '37347811454-725scavgpomj1sst73qd614scdoitmot.apps.googleusercontent.com',\n      iosClientId: '37347811454-f21pooncuuhr4t83ego1ernhshq9isof.apps.googleusercontent.com',\n      scopes: ['profile', 'email'],\n    });\n    return result;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function loginGoogle() {\n  return async (dispatch) => {\n    try {\n      const endpoint = 'http://192.168.1.134:1240/user';\n      const { user } = await signInWithGoogle();\n      const { data } = await axios.post(endpoint, user);\n      dispatch(loadUserSuccess(data));\n    } catch (error) {\n      dispatch(loadError(error));\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}